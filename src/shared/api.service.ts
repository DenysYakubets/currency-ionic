import { Injectable } from '@angular/core';
import { Http, Response } from '@angular/http';
import { Observable } from 'rxjs/Observable';
import 'rxjs/add/operator/map';
import 'rxjs/add/operator/catch';


@Injectable()
export class ApiService {

    constructor(private http: Http) { }

    getData(basicCurrency: string) {
        return this.http.get(this.baseUrl).map(
            result => {
                let newResult = new Array();
                result.json().query.results.rate.forEach(element => {
                    return newResult.push({ name: element.Name.substr(-3), rate: element.Rate });
                });
                return newResult;
            }
        );
    }

    

    private baseUrl = `https://query.yahooapis.com/v1/public/yql?q=select * from yahoo.finance.xchange where pair in (
"USDAED",
"USDAFN",
"USDALL",
"USDAMD",
"USDANG",
"USDAOA",
"USDARS",
"USDAUD",
"USDAWG",
"USDAZN",
"USDBAM",
"USDBBD",
"USDBDT",
"USDBGN",
"USDBHD",
"USDBIF",
"USDBDT",
"USDBMD",
"USDBND",
"USDBOB",
"USDBRL",
"USDBSD",
"USDBTN",
"USDBWP",
"USDBYN",
"USDBZD",
"USDCAD",
"USDCDF",
"USDCHF",
"USDCLP",
"USDCNY",
"USDCOP",
"USDCRC",
"USDCUC",
"USDCUP",
"USDCVE",
"USDCZK",
"USDDJF",
"USDDKK",
"USDDOP",
"USDDZD",
"USDEGP",
"USDERN",
"USDETB",
"USDEUR",
"USDFJD",
"USDFKP",
"USDGBP",
"USDGEL",
"USDGHS",
"USDGIP",
"USDGMD",
"USDGNF",
"USDGTQ",
"USDGYD",
"USDHKD",
"USDHNL",
"USDHRK",
"USDHTG",
"USDHUF",
"USDIDR",
"USDILS",
"USDINR",
"USDIQD",
"USDIRR",
"USDISK",
"USDJMD",
"USDJOD",
"USDJPY",
"USDKES",
"USDKGS",
"USDKHR",
"USDKMF",
"USDKPW",
"USDKRW",
"USDKWD",
"USDKYD",
"USDKZT",
"USDLAK",
"USDLBP",
"USDLKR",
"USDLRD",
"USDLSL",
"USDLYD",
"USDMAD",
"USDMDL",
"USDMGA",
"USDMKD",
"USDMMK",
"USDMNT",
"USDMOP",
"USDMRO",
"USDMUR",
"USDMVR",
"USDMWK",
"USDMXN",
"USDMYR",
"USDMZN",
"USDNAD",
"USDNGN",
"USDNIO",
"USDNOK",
"USDNPR",
"USDNZD",
"USDOMR",
"USDPAB",
"USDPEN",
"USDPGK",
"USDPHP",
"USDPKR",
"USDPLN",
"USDPYG",
"USDQAR",
"USDRON",
"USDRSD",
"USDRUB",
"USDRWF",
"USDSAR",
"USDSBD",
"USDSCR",
"USDSDG",
"USDSEK",
"USDSGD",
"USDSHP",
"USDSLL",
"USDSOS",
"USDSRD",
"USDSTD",
"USDSVC",
"USDSYP",
"USDSZL",
"USDTHB",
"USDTJS",
"USDTMT",
"USDTND",
"USDTOP",
"USDTRY",
"USDTTD",
"USDTWD",
"USDTZS",
"USDUAH",
"USDUGX",
"USDUSD",
"USDUYU",
"USDUZS",
"USDVEF",
"USDVND",
"USDVUV",
"USDWST",
"USDXAF",
"USDXCD",
"USDXDR",
"USDXOF",
"USDXPF",
"USDYER",
"USDZAR",
"USDZMW"
)&format=json&env=store://datatables.org/alltableswithkeys`;
}